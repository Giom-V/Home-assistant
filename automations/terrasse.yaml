# Automations for the terrace and front yard lights.
# Includes logic for turning lights on/off based on sun and cover position.

- id: "1678555411746"
  alias: Allumer les lumières de la terrasse au coucher du soleil
  description: "Allume les lumières de la terrasse au coucher du soleil"
  trigger:
    - platform: sun
      event: sunset
      offset: 00:30
  condition:
    - condition: state
      entity_id: binary_sensor.people_home
      state: "on"
  action:
    - type: turn_on
      entity_id: light.lumiere_exterieure_1_forceonlight
      domain: light
      enabled: false
    - type: turn_on
      entity_id: light.lampe_exterieure_2
      domain: light
    - type: turn_on
      entity_id: light.lampe_exterieure_3
      domain: light
  mode: single
- id: "1701885267125"
  alias: "Turn on Guirlande "
  description: "Allume la guirlande au coucher du soleil"
  trigger:
    - platform: sun
      event: sunset
      offset: 0
  condition: []
  action:
    - type: turn_on
      device_id: 93b4f42fad374b6536e6a0602f1708b0
      entity_id: 0f22d93bb08479d66e2679f5bb3cd0aa
      domain: switch
  mode: single
- id: "1701885292744"
  alias: "Turn off Guirlande "
  description: "Éteint la guirlande"
  trigger:
    - platform: device
      device_id: 98ca57dc34f30913565109817baf591f
      domain: cover
      entity_id: ed1cfca6e4f23b27177bdff5b92dd33b
      type: closed
      for:
        hours: 0
        minutes: 10
        seconds: 0
  condition: []
  action:
    - type: turn_off
      device_id: 93b4f42fad374b6536e6a0602f1708b0
      entity_id: 0f22d93bb08479d66e2679f5bb3cd0aa
      domain: switch
    - type: turn_off
      device_id: 5e75d15e67ac1988a925403412f6cd1a
      entity_id: bb8311f3e6def79849d52135f7f1dc0c
      domain: light
    - type: turn_off
      device_id: c2eedf7108fcbb4f944ae4b273d0227b
      entity_id: d57a58e9d09d56214d1fa00eda9917b9
      domain: light
    - type: turn_off
      device_id: e310bad303788f20ec0ac63b758667f1
      entity_id: eac3459946c00fb182e1aa26687ec3ed
      domain: light
  mode: single

- id: "turn_off_front_yard_lights_when_dining_room_cover_closed"
  alias: "Éteindre lumières jardin avant quand volet SAM fermé"
  description: "Éteint toutes les lumières du jardin avant (lampes et guirlandes) lorsque le volet de la salle à manger est fermé."
  trigger:
    - platform: state
      entity_id: cover.legrand_shutter_sw_with_level_control_cover
      to: "closed"
  condition: []
  action:
    - service: homeassistant.turn_off
      target:
        entity_id:
          - group.outsidelamps
          - switch.guirlande_switch
          - switch.guirlande_terrasse
          - switch.guirlande_escalier_ext_power_switch
  mode: single
