# Automations related to my office.
#
# There are 2 automations:
# * `Press office button (switch on/off screens)`: Toggles my screens on/off
#   when I press the button on my desk.
# * `Office window opened while it rains`: Sends me a notification if the
#   office window is open while it's raining.

- id: "office_button_toggle_screens"
  alias: Press office button (switch on/off screens)
  description: ""
  triggers:
    - domain: mqtt
      device_id: 09d4ba3dded13922cf5b606b4bfd261b
      type: action
      subtype: single
      trigger: device
  conditions: []
  actions:
    - service: switch.toggle
      target:
        entity_id:
          - switch.multiprise_bureau_l2
          - switch.multiprise_bureau_l1
  mode: single

- id: "office_window_rain_notification"
  alias: Office window opened while it rains
  description: "Sends me a notification if the office window is open while it's raining."
  triggers:
    - platform: numeric_state
      entity_id: sensor.pluviometre_netatmo_rain
      above: 0.1
  conditions:
    - condition: state
      entity_id: binary_sensor.velux_bureau_contact
      state: "on"
  actions:
    - service: notify.mobile_app_pixel_8_pro
      data:
        title: "üåßÔ∏è Pluie dans le bureau"
        message: "Le velux est ouvert alors qu'il pleut üò±"
  mode: single
