- id: LightOnSolarium30mnBeforSunset
  alias: swith light on at sunset on weekdays
  trigger:
  - platform: sun
    event: sunset
    offset: -00:30:00
  condition:
  - condition: time
    after: '16:30:00'
    before: '18:30:00'
  - condition: state
    entity_id: input_boolean.visitors
    state: 'on'
  action:
  - service: homeassistant.turn_on
    entity_id: light.solarium
  - service: notify.slack
    data:
      message: Lights on 30mn before sunset!
- id: LightOnSolariumAt430pm
  alias: swith light on at 4:30 on weekdays
  trigger:
  - platform: time
    at: '16:30:00'
  condition:
  - condition: sun
    after: sunset
    after_offset: -00:30:00
  - condition: state
    entity_id: input_boolean.visitors
    state: 'on'
  action:
  - service: homeassistant.turn_on
    entity_id: light.solarium
  - service: notify.slack
    data:
      message: Lights on at 4:30!
- id: LightOffSolariumAt6:30pm #TODO: refactor to have a global solution
  alias: swith light off at 6:30pm on weekdays
  trigger:
  - platform: time
    at: '18:30:00'
  condition:
  - condition: state
    entity_id: input_boolean.visitors
    state: 'on'
  action:
  - service: homeassistant.turn_off
    entity_id: light.solarium
  - service: notify.slack
    data:
      message: Lights off!
    
- id: '1582074352047'
  alias: Freezer light
  trigger:
  - type: opened
    platform: device
    device_id: 85bc07f4124e490eb8ba0082a9abf76c
    entity_id: binary_sensor.freezer_door
    domain: binary_sensor
  condition: []
  action:
  - entity_id: light.white
    service: light.turn_on
  - delay: 
      minutes: 2
  - entity_id: light.white #TODO: this should be managed elsewhere
    service: light.turn_off